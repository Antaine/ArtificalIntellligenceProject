FUNCTION_BLOCK getCatchChance

	VAR_INPUT
		playerDistance : REAL;
		numOfEnemies : REAL;
	END_VAR
	
	VAR_OUTPUT
		catchChance : REAL;
	END_VAR
	
	FUZZIFY playerDistance
		TERM close := (5,1)(15,0.5)(25,0);
		TERM medium := trian 25 50 75;
		TERM far := (5, 0)(15,0.2)(30,1);
	END_FUZZIFY
	
	FUZZIFY numOfEnemies
		TERM none := (0,1)(1,0);
		TERM few := (0, 0)(2,1)(6,0);
		TERM high := (6, 1)(4,0.8)(0, 0);
	END_FUZZIFY
	
	DEFUZZIFY catchChance
		TERM low := (0, 1) (25, 0);
		TERM normal := trian 25.0 55.0 65.0;
		TERM high := (55, 0) (100, 1);
		METHOD : COG;
		DEFAULT := 0;
	END_DEFUZZIFY
	
	RULEBLOCK No1
		AND : MIN;
		ACT : MIN;
		ACCU : MAX;
		
		RULE 1 : IF playerDistance IS close THEN catchChance IS high;
		RULE 2 : IF playerDistance IS medium AND numOfEnemies IS high THEN catchChance IS high;
		RULE 3 : IF playerDistance IS medium AND numOfEnemies IS few THEN catchChance IS normal;
		RULE 4 : IF playerDistance IS far THEN catchChance IS low;
		RULE 5 : IF playerDistance IS medium AND numOfEnemies IS high THEN catchChance IS high;
		RULE 6 : IF playerDistance IS far THEN catchChance IS low;
	END_RULEBLOCK

END_FUNCTION_BLOCK